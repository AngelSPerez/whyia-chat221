<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhyAI</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="chat-container">
        <h1>WhyAI</h1>
        <div class="chat-box" id="chat-box">
            <div class="message ia">
                <p id="greeting-message">Hola, soy WhyAI. ¿En qué puedo ayudarte hoy?</p>
            </div>
        </div>
        <form class="input-area" id="chat-form">
            <input type="text" name="dummy" style="position:absolute; opacity:0; pointer-events:none; width:0; height:0;" tabindex="-1">
            <div class="input-wrapper">
                <textarea 
                    id="user-input" 
                    placeholder="Escribe tu mensaje..." 
                    autocomplete="off" 
                    spellcheck="false" 
                    enterkeyhint="enter"
                    rows="1"></textarea>
                <button id="send-button" type="submit">Enviar</button>
            </div>
            <div class="disclaimer" id="disclaimer">WhyAI puede cometer errores. Comprueba la información importante.</div>
        </form>
    </div>

    <script>
        // Textos en diferentes idiomas
        const translations = {
            es: {
                greeting: "Hola, soy WhyAI. ¿En qué puedo ayudarte hoy?",
                placeholder: "Escribe tu mensaje...",
                button: "Enviar",
                disclaimer: "WhyAI puede cometer errores. Comprueba la información importante."
            },
            en: {
                greeting: "Hello, I'm WhyAI. How can I help you today?",
                placeholder: "Type your message...",
                button: "Send",
                disclaimer: "WhyAI can make mistakes. Check important information."
            }
        };

        // Países de habla hispana (códigos ISO)
        const spanishSpeakingCountries = [
            'ES', 'MX', 'AR', 'CO', 'VE', 'PE', 'CL', 'EC', 'GT', 'CU',
            'BO', 'DO', 'HN', 'PY', 'SV', 'NI', 'CR', 'PA', 'UY', 'GQ'
        ];

        // Función para detectar el idioma basado en la región
        async function detectLanguage() {
            try {
                // Usar API gratuita de ipapi.co
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                
                // Verificar si el país es de habla hispana
                const countryCode = data.country_code;
                const language = spanishSpeakingCountries.includes(countryCode) ? 'es' : 'en';
                
                return language;
            } catch (error) {
                console.log('Error detecting location, using browser language');
                // Fallback: usar el idioma del navegador
                const browserLang = navigator.language || navigator.userLanguage;
                return browserLang.startsWith('es') ? 'es' : 'en';
            }
        }

        // Función para aplicar las traducciones
        function applyTranslations(lang) {
            const texts = translations[lang];
            
            document.getElementById('greeting-message').textContent = texts.greeting;
            document.getElementById('user-input').placeholder = texts.placeholder;
            document.getElementById('send-button').textContent = texts.button;
            document.getElementById('disclaimer').textContent = texts.disclaimer;
            document.documentElement.lang = lang;
        }

        // Detectar y aplicar el idioma al cargar la página
        detectLanguage().then(lang => {
            applyTranslations(lang);
        });
    </script>
    <script type="module" src="script.js"></script>
</body>
</html>
